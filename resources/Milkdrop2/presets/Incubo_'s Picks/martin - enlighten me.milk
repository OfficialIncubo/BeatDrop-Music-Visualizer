MILKDROP_PRESET_VERSION=201
PSVERSION=3
PSVERSION_WARP=3
PSVERSION_COMP=3
[preset00]
fRating=4.000
fGammaAdj=1.980
fDecay=0.500
fVideoEchoZoom=0.907
fVideoEchoAlpha=0.500
nVideoEchoOrientation=3
nWaveMode=4
bAdditiveWaves=1
bWaveDots=0
bWaveThick=1
bModWaveAlphaByVolume=1
bMaximizeWaveColor=0
bTexWrap=1
bDarkenCenter=0
bRedBlueStereo=0
bBrighten=0
bDarken=1
bSolarize=0
bInvert=0
fWaveAlpha=0.001
fWaveScale=3.641
fWaveSmoothing=0.090
fWaveParam=-0.000
fModWaveAlphaStart=0.000
fModWaveAlphaEnd=0.800
fWarpAnimSpeed=1.459
fWarpScale=2.007
fZoomExponent=1.00000
fShader=0.000
zoom=0.99990
rot=0.00000
cx=0.500
cy=0.500
dx=0.00000
dy=0.00000
warp=0.01000
sx=0.99990
sy=1.00000
wave_r=0.000
wave_g=0.000
wave_b=0.000
wave_x=0.500
wave_y=0.500
ob_size=0.000
ob_r=0.100
ob_g=0.100
ob_b=0.200
ob_a=1.000
ib_size=0.000
ib_r=0.250
ib_g=0.250
ib_b=0.250
ib_a=0.000
nMotionVectorsX=12.000
nMotionVectorsY=9.000
mv_dx=0.000
mv_dy=0.000
mv_l=0.000
mv_r=1.000
mv_g=1.000
mv_b=1.000
mv_a=0.000
b1n=0.000
b2n=0.000
b3n=0.000
b1x=0.700
b2x=0.800
b3x=0.600
b1ed=0.000
wavecode_0_enabled=1
wavecode_0_samples=512
wavecode_0_sep=0
wavecode_0_bSpectrum=0
wavecode_0_bUseDots=1
wavecode_0_bDrawThick=0
wavecode_0_bAdditive=1
wavecode_0_scaling=1.00000
wavecode_0_smoothing=0.50000
wavecode_0_r=0.600
wavecode_0_g=0.600
wavecode_0_b=0.800
wavecode_0_a=1.000
wave_0_per_frame1=t1=0;
wave_0_per_point1=n=t1*8;
wave_0_per_point2=speed=reg46*reg45;
wave_0_per_point3=z=megabuf(n+2);
wave_0_per_point4=if (z>0,
wave_0_per_point5=  x = megabuf(n)/z+.5;
wave_0_per_point6=  y = megabuf(n+1)/z*reg32+0.5;
wave_0_per_point7=,0);
wave_0_per_point8=
wave_0_per_point9=out=(x>1)||(x<0)||(y>1)||(y<0)||(z<0);
wave_0_per_point10=if (out,
wave_0_per_point11=  megabuf(n)= (rand(2)-1)/2; //x
wave_0_per_point12=  megabuf(n+1)=(rand(2)-1)/2; //y
wave_0_per_point13=  megabuf(n+2)=1;
wave_0_per_point14=,
wave_0_per_point15=  d=sqrt(sqr(megabuf(n))+sqr(megabuf(n+1)));
wave_0_per_point16=  megabuf(n+2)-=speed/fps;
wave_0_per_point17=);
wave_0_per_point18=
wave_0_per_point19=a=sqrt(z)*(1-pow(z,4));
wave_0_per_point20=t1+=1;
shapecode_1_enabled=1
shapecode_1_sides=6
shapecode_1_additive=0
shapecode_1_thickOutline=1
shapecode_1_textured=1
shapecode_1_num_inst=5
shapecode_1_x=0.500
shapecode_1_y=0.500
shapecode_1_rad=0.73150
shapecode_1_ang=0.00000
shapecode_1_tex_ang=0.00000
shapecode_1_tex_zoom=1.50350
shapecode_1_r=1.000
shapecode_1_g=1.000
shapecode_1_b=1.000
shapecode_1_a=0.700
shapecode_1_r2=1.000
shapecode_1_g2=1.000
shapecode_1_b2=1.000
shapecode_1_a2=0.000
shapecode_1_border_r=0.000
shapecode_1_border_g=0.000
shapecode_1_border_b=0.000
shapecode_1_border_a=0.000
shape_1_per_frame1=k=instance/num_inst;
shape_1_per_frame2=rad = (0.4 + k*0.3);//*reg03;
shape_1_per_frame3=
shape_1_per_frame4=ang = reg04 + 1*sin(instance*reg04*7);
shape_1_per_frame5=a=reg06;
shape_1_per_frame6=tex_zoom=reg05;
shape_1_per_frame7=
shapecode_2_enabled=1
shapecode_2_sides=10
shapecode_2_additive=0
shapecode_2_thickOutline=0
shapecode_2_textured=0
shapecode_2_num_inst=400
shapecode_2_x=0.500
shapecode_2_y=0.500
shapecode_2_rad=0.54281
shapecode_2_ang=3.64425
shapecode_2_tex_ang=2.51327
shapecode_2_tex_zoom=1.81669
shapecode_2_r=1.000
shapecode_2_g=1.000
shapecode_2_b=1.000
shapecode_2_a=1.000
shapecode_2_r2=0.000
shapecode_2_g2=0.000
shapecode_2_b2=0.000
shapecode_2_a2=0.000
shapecode_2_border_r=0.000
shapecode_2_border_g=0.000
shapecode_2_border_b=0.000
shapecode_2_border_a=0.000
shape_2_init1=n=0; loop (1024, 
shape_2_init2=  megabuf(n)  =(rand(1)-.5)*.2; 
shape_2_init3=  megabuf(n+1)=(rand(1)-.5)*.2; 
shape_2_init4=  megabuf(n+2)=rand(1)+.1; 
shape_2_init5=  megabuf(n+3)=reg40; 
shape_2_init6=  megabuf(n+4)=reg41; 
shape_2_init7=  megabuf(n+5)=reg42; 
shape_2_init8=  megabuf(n+6)=0.5+rand(1)/2; 
shape_2_init9=n+=8);
shape_2_init10=t2=0;
shape_2_per_frame1=i=instance;
shape_2_per_frame2=zmax=1.4;
shape_2_per_frame3=speed=reg45;
shape_2_per_frame4=n=8*i;
shape_2_per_frame5=z = megabuf(n+2)*zmax;
shape_2_per_frame6=if (z>0,
shape_2_per_frame7=  x = megabuf(n)/z;
shape_2_per_frame8=  y = megabuf(n+1)/z;
shape_2_per_frame9= //close trig reg50
shape_2_per_frame10=  rad = min(1,.0018*abs(zmax/z)*reg32) ;
shape_2_per_frame11=  if ((sqrt(x*x+y*y)<0.2) && (rad>0.1), reg50+=1,0);
shape_2_per_frame12=  x+=.5;
shape_2_per_frame13=  y=y*reg32+.5;
shape_2_per_frame14=,rad=0;);
shape_2_per_frame15=
shape_2_per_frame16=r=megabuf(n+3);
shape_2_per_frame17=g=megabuf(n+4);
shape_2_per_frame18=b=megabuf(n+5);
shape_2_per_frame19=
shape_2_per_frame20=out=(x>1)||(x<0)||(y>1)||(y<0)||(z<=0);
shape_2_per_frame21=if (out,
shape_2_per_frame22=  j+=1;
shape_2_per_frame23=  ttt=j*.1;
shape_2_per_frame24=  px0=q3*(1+sin(ttt)/4);
shape_2_per_frame25=  py0=q4*(1+cos(ttt/1.7)/4);
shape_2_per_frame26=  megabuf(n+2)=1-.1*sin((px0+py0)*60);;
shape_2_per_frame27= 
shape_2_per_frame28=  o1=(rand(1)-.5)*treb;
shape_2_per_frame29=  o2=(rand(1)-.5)*mid;
shape_2_per_frame30=  megabuf(n) =px0 +.012*o1; 
shape_2_per_frame31=  megabuf(n+1)=py0 +.012*o2;;
shape_2_per_frame32=
shape_2_per_frame33=  megabuf(n+3)=reg40;
shape_2_per_frame34=  megabuf(n+4)=reg41;
shape_2_per_frame35=  megabuf(n+5)=reg42;
shape_2_per_frame36=  megabuf(n+6)= 0.95+.1*rand(1);
shape_2_per_frame37=,
shape_2_per_frame38=  rad0 = sqrt(sqr(megabuf(n))+sqr(megabuf(n+1)));
shape_2_per_frame39=  megabuf(n+2)-=speed/fps*megabuf(n+6) ;
shape_2_per_frame40=  if ((i>0) && (i<num_inst-1),
shape_2_per_frame41=    n1=(i-1)*8; n2=(i+1)*8; le=reg21; ri=1-le; 
shape_2_per_frame42=    x2 =  le*megabuf(n1)  +ri*megabuf(n2);
shape_2_per_frame43=    y2 =  le*megabuf(n1+1)+ri*megabuf(n2+1);
shape_2_per_frame44=    z2 =  le*megabuf(n1+2)+ri*megabuf(n2+2);
shape_2_per_frame45=
shape_2_per_frame46=    dist = max(abs(megabuf(n+2)-megabuf(n1+2)),abs(megabuf(n+2)-megabuf(n2+2)));
shape_2_per_frame47=    dec = 1-reg20/fps*(dist<0.5)*pow(abs(megabuf(n+2)),0.25) ;
shape_2_per_frame48=  sh = 1+reg22*(1-megabuf(n+2));
shape_2_per_frame49=    megabuf(n)  =megabuf(n)   *dec*sh +x2*(1-dec);
shape_2_per_frame50=    megabuf(n+1)=megabuf(n+1) *dec*sh +y2*(1-dec);
shape_2_per_frame51=    megabuf(n+2)=megabuf(n+2) *dec +z2*(1-dec);
shape_2_per_frame52=  ,0);
shape_2_per_frame53=);
shape_2_per_frame54=
shape_2_per_frame55=a=0.8;
shape_2_per_frame56=a2=1;
shape_2_per_frame57=additive = i%4>1;
shapecode_3_enabled=1
shapecode_3_sides=10
shapecode_3_additive=0
shapecode_3_thickOutline=0
shapecode_3_textured=0
shapecode_3_num_inst=200
shapecode_3_x=0.550
shapecode_3_y=0.500
shapecode_3_rad=0.16446
shapecode_3_ang=0.00000
shapecode_3_tex_ang=0.00000
shapecode_3_tex_zoom=0.90529
shapecode_3_r=0.000
shapecode_3_g=0.000
shapecode_3_b=0.000
shapecode_3_a=1.000
shapecode_3_r2=0.000
shapecode_3_g2=0.000
shapecode_3_b2=0.000
shapecode_3_a2=1.000
shapecode_3_border_r=1.000
shapecode_3_border_g=1.000
shapecode_3_border_b=1.000
shapecode_3_border_a=0.000
shape_3_init1=n=0; loop (1024, 
shape_3_init2=  megabuf(n)  =(rand(1)-.5)*.2; 
shape_3_init3=  megabuf(n+1)=(rand(1)-.5)*.2; 
shape_3_init4=  megabuf(n+2)=rand(1)+.1; 
shape_3_init5=  megabuf(n+3)=reg40; 
shape_3_init6=  megabuf(n+4)=reg41; 
shape_3_init7=  megabuf(n+5)=reg42; 
shape_3_init8=  megabuf(n+6)=0.5+rand(1)/2; 
shape_3_init9=n+=8);
shape_3_init10=t2=0;
shape_3_per_frame1=i=instance;
shape_3_per_frame2=zmax=1.4;
shape_3_per_frame3=speed=reg45;
shape_3_per_frame4=n=8*i;
shape_3_per_frame5=z = megabuf(n+2)*zmax;
shape_3_per_frame6=if (z>0,
shape_3_per_frame7=  x = megabuf(n)/z;
shape_3_per_frame8=  y = megabuf(n+1)/z;
shape_3_per_frame9= //close trig reg50
shape_3_per_frame10=  rad = min(1,.0018*abs(zmax/z)*reg32) ;
shape_3_per_frame11=  if ((sqrt(x*x+y*y)<0.2) && (rad>0.1), reg50+=1,0);
shape_3_per_frame12=  x+=.5;
shape_3_per_frame13=  y=y*reg32+.5;
shape_3_per_frame14=,rad=0;);
shape_3_per_frame15=
shape_3_per_frame16=r=megabuf(n+3);
shape_3_per_frame17=g=megabuf(n+4);
shape_3_per_frame18=b=megabuf(n+5);
shape_3_per_frame19=rad = min(0.1,.0018*zmax/z*reg32) *reg44;
shape_3_per_frame20=
shape_3_per_frame21=out=(x>1)||(x<0)||(y>1)||(y<0)||(z<=0);
shape_3_per_frame22=if (out,
shape_3_per_frame23=  j+=1;
shape_3_per_frame24=  ttt=j*.15;
shape_3_per_frame25=  px0=-1.5*q3*(1+sin(ttt)/3);
shape_3_per_frame26=  py0=1.5*q4*(1+cos(ttt/1.7)/3);
shape_3_per_frame27=  megabuf(n+2)=1-.1*sin((px0+py0)*60);;
shape_3_per_frame28= 
shape_3_per_frame29=  o1=(rand(1)-.5)*treb;
shape_3_per_frame30=  o2=(rand(1)-.5)*mid;
shape_3_per_frame31=  megabuf(n) =px0 +.02*o1; 
shape_3_per_frame32=  megabuf(n+1)=py0 +.02*o2;;
shape_3_per_frame33=
shape_3_per_frame34=  megabuf(n+3)=reg40;
shape_3_per_frame35=  megabuf(n+4)=reg41;
shape_3_per_frame36=  megabuf(n+5)=reg42;
shape_3_per_frame37=  megabuf(n+6)= 0.95+.1*rand(1);
shape_3_per_frame38=,
shape_3_per_frame39=  rad0 = sqrt(sqr(megabuf(n))+sqr(megabuf(n+1)));
shape_3_per_frame40=  megabuf(n+2)-=speed/fps*megabuf(n+6) ;
shape_3_per_frame41=  if ((i>0) && (i<num_inst-1),
shape_3_per_frame42=    n1=(i-1)*8; n2=(i+1)*8; le=reg21; ri=1-le; 
shape_3_per_frame43=    x2 =  le*megabuf(n1)  +ri*megabuf(n2);
shape_3_per_frame44=    y2 =  le*megabuf(n1+1)+ri*megabuf(n2+1);
shape_3_per_frame45=    z2 =  le*megabuf(n1+2)+ri*megabuf(n2+2);
shape_3_per_frame46=
shape_3_per_frame47=    dist = max(abs(megabuf(n+2)-megabuf(n1+2)),abs(megabuf(n+2)-megabuf(n2+2)));
shape_3_per_frame48=    dec = 1-reg20/fps*(dist<0.5)*pow(abs(megabuf(n+2)),0.25) ;
shape_3_per_frame49=  sh = 1+reg22*(1-megabuf(n+2));
shape_3_per_frame50=    megabuf(n)  =megabuf(n)   *dec*sh +x2*(1-dec);
shape_3_per_frame51=    megabuf(n+1)=megabuf(n+1) *dec*sh +y2*(1-dec);
shape_3_per_frame52=    megabuf(n+2)=megabuf(n+2) *dec +z2*(1-dec);
shape_3_per_frame53=  ,0);
shape_3_per_frame54=);
shape_3_per_frame55=
shape_3_per_frame56=a=0.8;
shape_3_per_frame57=a2=1;
shape_3_per_frame58=additive = i%4>1;
per_frame_init_1=n=0;loop(20000,megabuf(n)=gmegabuf(n)=0;n+=1);
per_frame_init_2=tr1=rand(6);
per_frame_init_3=tr2=rand(6);
per_frame_init_4=tr3=rand(6);
per_frame_init_5=tr4=rand(6);
per_frame_init_6=att=1+rand(20);
per_frame_init_7=lire=0.3+.4*rand(1);
per_frame_init_8=reg04=1; reg05=1.3;
per_frame_init_9=reg11=.5; reg12=0.8; reg13=0;
per_frame_init_10=reg40=.5+rand(1)/2; reg41=.5+rand(1)/2; reg42=0.5+rand(1)/2;
per_frame_init_11=reg50=0;
per_frame_init_12=show4=0;
per_frame_init_13=t_trig=time;
per_frame_1=dt=1/fps; dec_m = 1-5*dt; dec_s = 1-1*dt; 
per_frame_2=
per_frame_3=vol = (bass+mid+treb)/3;
per_frame_4=vol_ = vol_*dec_m + (1-dec_m)*vol;
per_frame_5=vol_2 = vol_2*dec_m + (1-dec_m)*vol_;
per_frame_6=if (vol>peak*8, ib=1; peak=vol, ib=0);
per_frame_7=peak = peak*dec_m;
per_frame_8=idx  += ib;
per_frame_9=idx2 += (idx%8==0)*ib;
per_frame_10=q24=ib;
per_frame_11=if(reg15, 
per_frame_12=  q3=sin(idx*1.56*1.5)*0.1*min(1,mid);
per_frame_13=  q4=cos(idx*1.56*1.5)*0.1*min(1,mid);
per_frame_14=,
per_frame_15=  tr1+=(bass>1.3)*dt*5;
per_frame_16=  tr2+=(treb>1.3)*dt*7;
per_frame_17=  q3=sin(tr1)*0.08;
per_frame_18=  q4=sin(tr2)*0.08;
per_frame_19=);
per_frame_20=
per_frame_21=//ctrl copy shape and warp
per_frame_22=tr4+=(2+mid)*dt*0.05;
per_frame_23=reg03 = max(0,min(1,0.7+2*sin(tr4)));
per_frame_24=if (band(reg03==0,ib),reg04=0.3+rand(5); reg05=1+.5*rand(1);,0);
per_frame_25=reg10 = max(0,min(1,1.3+1.5*cos(tr4*1.33)));
per_frame_26=if (band(reg10==0,ib),reg11=0.3+rand(5); reg12=0.7+0.25*rand(1); reg13=0.1+rand(1)*0.7,0); //rot, zoom, ezoom
per_frame_27=q10=reg10;
per_frame_28=//attr ctrl
per_frame_29=reg50=min(20,max(0,reg50-1));
per_frame_30=ctrig=(reg50>4)&&(time-t_trig>1); //close shape trigger
per_frame_31=if(ctrig, 
per_frame_32=//  reg50=0;
per_frame_33=  t_trig=time;
per_frame_34=  att = (att+rand(22)+.5)/2;
per_frame_35=  lire= 0.35+rand(1)*.3;
per_frame_36=   show4=(rand(1)>0.7);
per_frame_37=,0);
per_frame_38=blow=reg50*dt;
per_frame_39=reg15=(reg03+reg10)<0.5;
per_frame_40=reg20=att;
per_frame_41=reg21=lire;
per_frame_42=
per_frame_43=//increase draw to center
per_frame_44=reg22= if (blow<=0, max(-3,-max(0,time-t_trig-15)*0.02)*dt, min(1,blow)*dt);
per_frame_45=reg44=show4;
per_frame_46=
per_frame_47=//red. shape 2
per_frame_48=reg06=reg03*0.8;
per_frame_49=
per_frame_50=//colors
per_frame_51=tc=time*2;
per_frame_52=reg40=.7+.2*sin(tc*.17);
per_frame_53=reg41=.7+.2*sin(tc*.13);
per_frame_54=reg42=.7+.2*sin(tc*.10);
per_frame_55=
per_frame_56=//speed
per_frame_57=reg45=0.35;
per_frame_58=reg46=1+0.5*sin(time*0.183);
per_frame_59=
per_frame_60=//xtra copy in comp
per_frame_61=q27=2*max(0,min(1,-1+2*sin(time*0.09)));
per_frame_62=
per_frame_63=reg32=aspecty;
per_frame_64=monitor = 0*int(reg50)+reg22;
per_frame_65=monitor = lire+int(1000*att);
per_frame_66=
per_frame_67=
per_pixel_1=rot  = reg11;
per_pixel_2=zoom = reg12+reg13*rad;
per_pixel_3=
warp_1=`float2 uv2;
warp_2=`float rad0;
warp_3=`#define sat saturate
warp_4=`shader_body
warp_5=`
warp_6=`{
warp_7=`uv2 = float2(1-uv.x,1-uv.y);
warp_8=`ret = tex2D(sampler_fc_main,uv);
warp_9=`
warp_10=`rad0=rad/min(aspect.x,aspect.y);
warp_11=`uv2=(uv-0.5)/aspect.xy+.5;
warp_12=`
warp_13=`ret *= sat(1-2*length(uv-0.5))*sat(.9+2*rad);
warp_14=`ret*=q10;
warp_15=`ret -=0.005;
warp_16=`
warp_17=`ret = max(ret,sat(1-150*length((uv-.5)*aspect.xy)));
warp_18=`}
comp_1=`#define sat saturate
comp_2=`sampler sampler_pw_noise_lq;
comp_3=`#define snh sampler_noise_hq
comp_4=`float d, z, radi, mask, ncity, ncity2, struc;
comp_5=`float2 uv1, uv2, uv3, uvc;
comp_6=`static const int anz = 18;
comp_7=`static const float2 pix = texsize.zw*2;
comp_8=`
comp_9=`float3 Get1 (float2 uvi, float par)
comp_10=`{return lerp(GetBlur2(uvi)*2, GetBlur1(uvi), par);}
comp_11=`
comp_12=`float noise2 (float2 uvi, float t) {float3 tmp = 1; float s = 4; ;
comp_13=`  for (int n = 1; n <= 2; n +=1 ) {uvi.y-=t*.05; tmp += tex2D(snh,uvi*s); s*=2;}
comp_14=`  return tmp;}
comp_15=`float pwnoise (float2 uvi, float t) {float3 tmp = 1; float s = 1; ;
comp_16=`  for (int n = 1; n <= 3; n +=1 ) {tmp += tex2D(sampler_pw_noise_lq,uvi*s)/s; s*=2.5;}
comp_17=`  return (tmp);}
comp_18=`
comp_19=`
comp_20=`shader_body {
comp_21=`
comp_22=`uv1 = (uv-float2(0.5,0.52))*aspect.xy;
comp_23=`z = .1/(uv1.y);
comp_24=`uv2 = float2 (uv1.x*1,1)*z + float2(0,time/8);
comp_25=`
comp_26=`mask = sat(tex2D(snh,uv2*0.1).r*8-6);
comp_27=`d  = (noise2(uv2-pix,+time)-noise2(uv2+pix,time)).r;
comp_28=`d*=d;
comp_29=`ret=mask*0.015*(z>0)*noise2(uv2,0);
comp_30=`//ret += sat(tex2D(snh, uv2*.02).r-.6)*(z<0)*.2;
comp_31=`
comp_32=`uv2=frac (uv1*float2(.8,.4)+float2(.5,.5));
comp_33=`ret += d*GetBlur2(uv2)*(z>0)*2;
comp_34=`
comp_35=`ret += sat(1-2/z)*.04*(1.5+sin(3*rad-time*0.1))*(2+slow_roam_cos) ;
comp_36=`
comp_37=`ncity = sat(16*(uv1.y+.120)>pwnoise(uv.x/8,0)) *sat(1-2/z);
comp_38=`ret-=ncity/16;
comp_39=`ncity = sat(6*(uv.y-.2)>pwnoise(uv.x/12,0)) *sat(1-2/z) * (abs(uv1.x)>0.07);
comp_40=`ncity2= sat(6*(uv.y-.2)>pwnoise(uv.x/12-0.003*uv1.x,0)) * (abs(uv1.x)>0.07);
comp_41=`ret-=ncity/2;
comp_42=`
comp_43=`struc=sat(ncity-ncity2)*(pwnoise(1.5*uv,0)-.5);
comp_44=`ret+=.15*struc;
comp_45=`ret+=struc*sat(1-rad)*GetBlur1(.501)*0.5;
comp_46=`
comp_47=`ret=sat(ret);
comp_48=`radi = 1;
comp_49=`float3 shine2 = 0;
comp_50=`for (int n=1; n <= anz;  n++)
comp_51=`{ 
comp_52=`  shine2 +=   1*Get1((uv-.5)*radi+.5,radi)/anz;
comp_53=`  radi -= .5/anz;
comp_54=`}
comp_55=`ret += (2*shine2+ lerp (GetPixel(uv),2*GetBlur1(uv),1*rad*rad))*.8;
comp_56=`
comp_57=`ret += GetPixel((.5-uv)*2+.5)*1 * sat(1-rad*3)*q27;
comp_58=`}
comp_59=`written by martin
comp_60=`END
